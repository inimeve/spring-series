kind: ConfigMap
apiVersion: v1
metadata:
  name: mongo-initdb
  namespace: db-demo
data:
  createuser.sh: |
    mongo <<EOF
    use reporting
    db.createUser(
      {
        user: "reportsUser",
        pwd: "12345678",
        roles: [
          { role: "read", db: "reporting" },
          { role: "read", db: "products" },
          { role: "read", db: "sales" },
          { role: "readWrite", db: "accounts" }
        ]
      }
    )
    EOF
  mongo-seed.sh: |
    mongoimport \
    --db demo-data \
    --collection users \
    --type json \
    --file /demo-data/users.json \
    --jsonArray